<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>API接入演示</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    #data-container {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    button {
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .loading {
      color: #666;
      font-style: italic;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <h1>API数据获取演示</h1>
  <button id="fetch-btn">获取数据</button>
  <div id="data-container">点击按钮获取数据...</div>

  <script>
    document.getElementById('fetch-btn').addEventListener('click', async () => {
      const container = document.getElementById('data-container');
      
      try {
        // 显示加载状态
        container.innerHTML = '<div class="loading">数据加载中...</div>';
        
        // 1. 使用fetch API发起请求
        const response = await fetch('https://api.frankfurter.app/latest?from=GBP&to=CNY');
        
        // 2. 检查响应状态
        if (!response.ok) {
          throw new Error(`HTTP错误! 状态码: ${response.status}`);
        }
        
        // 3. 解析JSON数据
        const data = await response.json();
        
        // 4. 处理并显示数据
        container.innerHTML = `
          <h3>最新汇率</h3>
          <p>1 GBP = ${data.rates.CNY} CNY</p>
          <p>更新时间: ${data.date}</p>
        `;
        
      } catch (error) {
        // 5. 错误处理
        container.innerHTML = `
          <div class="error">
            <p>获取数据失败</p>
            <p>${error.message}</p>
          </div>
        `;
        console.error('API请求错误:', error);
      }
    });
  </script>
</body>
</html>
